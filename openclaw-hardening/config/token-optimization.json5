// OpenClaw Token Optimization Config Template
// Merge into ~/.openclaw/openclaw.json
//
// Key insight: Don't use your most expensive model for everything.
// Route sub-agents and heartbeats to cheaper models.
{
  agents: {
    defaults: {
      // Primary model for main conversations
      model: { primary: "anthropic/claude-opus-4-5" },
      
      // Sub-agents use cheaper model (5x savings)
      subagents: { model: "anthropic/claude-sonnet-4" },
      
      // Fallback when primary is rate-limited
      fallbacks: ["anthropic/claude-sonnet-4"],
      
      // Heartbeat interval: just under Anthropic 1h cache TTL
      // This keeps the prompt cache warm, avoiding expensive re-caching
      heartbeat: { every: "55m" },
      
      // Auto-prune old tool outputs from context
      // Reduces cache write costs after idle periods
      contextPruning: { mode: "cache-ttl", ttl: "1h" },
      
      // Auto-compact long conversations
      compaction: { enabled: true },
    }
  },

  // Optional: model-specific cache settings
  // models: {
  //   "anthropic/claude-opus-4-5": {
  //     params: { cacheRetention: "long" }
  //   }
  // },
}
